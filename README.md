# PID

### 1. 定义 PID 控制块

```c
PID_CB_t Heat_PID_CB = {0};
```

### 2. 初始化 PID 参数

```c
Heat_PID_CB.Target = 100;
Heat_PID_CB.p = 3.85;
Heat_PID_CB.i = 0.07;
Heat_PID_CB.d = 3.35;
```

### 3. 更新输入值

```
Heat_PID_CB.Input = value;
```

### 4. PID 计算

```c
PID_Calculate(&Heat_PID_CB);
```

### 5. 将计算后的输出值，传入控制模块

```c
ControlFunction(Heat_PID_CB.Output);
```

### 6. 参数

在实际调试中，只能先大致设定一个经验值，然后根据调节效果修改。
对于温度系统：P（%）20--60，I（分）3--10，D（分）0.5--3
对于流量系统：P（%）40--100，I（分）0.1--1
对于压力系统：P（%）30--70，I（分）0.4--3
对于液位系统：P（%）20--80，I（分）1--5
参数整定找最佳，从小到大顺序查
先是比例后积分，最后再把微分加
曲线振荡很频繁，比例度盘要放大
曲线漂浮绕大湾，比例度盘往小扳
曲线偏离回复慢，积分时间往下降
曲线波动周期长，积分时间再加长
曲线振荡频率快，先把微分降下来
动差大来波动慢。微分时间应加长
理想曲线两个波，前高后低4比1
一看二调多分析，调节质量不会低